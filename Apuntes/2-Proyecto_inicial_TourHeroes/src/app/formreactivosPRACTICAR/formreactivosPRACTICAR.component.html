<h2>Formularios reactivos</h2>
<hr />

<div class="row">
  <div class="col">
    <form [formGroup]="miFormulario" (ngSubmit)="guardar()">
      <!-- Cuando se le de al submit, ejecuta el método guardar() -->
      <!-- Nombre -->
      <div class="row">
        <label class="col-sm-3 col form-label">Nombre</label>
        <div class="col-sm-6">
          <input
            type="text"
            class="form-control bg-dark text-white"
            formControlName="nombre"
          />

          <ul *ngIf="miFormulario.controls['nombre'].errors">
            <li
              class="form-text text-danger"
              *ngIf="miFormulario.controls['nombre'].errors?.['required'] && miFormulario.controls['nombre'].touched"
            >
              No puede estar vacío
            </li>
            <li
              class="form-text text-danger"
              *ngIf="miFormulario.controls['nombre'].errors?.['minlength'] && miFormulario.controls['nombre'].touched"
            >
              Debe tener más de 4 caracteres
            </li>
            <li
              class="form-text text-danger"
              *ngIf="miFormulario.controls['nombre'].errors?.['maxlength'] && miFormulario.controls['nombre'].touched"
            >
              Debe tener menos de 25 caracteres
            </li>
          </ul>
        </div>
      </div>
      <div class="row mt-3">
        <label class="col-sm-3 col form-label">Año de nacimiento</label>
        <div class="col-sm-6">
          <input
            type="number"
            class="form-control bg-dark text-white"
            formControlName="nacimiento"
          />

          <ul *ngIf="miFormulario.controls['nacimiento'].errors">
            <li
              class="form-text text-danger"
              *ngIf="miFormulario.controls['nacimiento'].errors?.['min'] && miFormulario.controls['nacimiento'].touched"
            >
              Ya estarías muerto si nacieras en ese año capullín
            </li>
            <li
              class="form-text text-danger"
              *ngIf="miFormulario.controls['nacimiento'].errors?.['max'] && miFormulario.controls['nacimiento'].touched"
            >
              Todavía ni hubieras nacido, venga ya
            </li>
          </ul>
        </div>
      </div>

      <div class="form-check mt-3">
        <input
          class="form-check-input"
          type="radio"
          id="flexRadioDefault1"
          value="S"
          formControlName="acepta"
        />
        <label class="form-check-label" for="flexRadioDefault1"> Sí </label>
      </div>
      <div class="form-check">
        <input
          class="form-check-input"
          type="radio"
          id="flexRadioDefault2"
          value="N"
          formControlName="acepta"
        />
        <label class="form-check-label" for="flexRadioDefault2"> No </label>
      </div>

      <span *ngIf="miFormulario.controls['acepta'].value == 'N'" class="form-text text-danger">Tienes que aceptar los términos y condiciones</span>

      <div class="row mt-3">
        <div class="col-9">
          <button class="btn btn-primary float-end" type="submit">
            Guardar
          </button>
          <!-- También podemos poner [disabled]="miFormulario.invalid" para deshabilitar el botón si hay errores -->
        </div>
      </div>
    </form>
  </div>
</div>

<span>Valido</span>
<pre>{{ miFormulario.valid }}</pre>

<span>Pristine (no modificado)</span>
<pre>{{ miFormulario.pristine }}</pre>

<span>Dirty (modificado)</span>
<pre>{{ miFormulario.dirty }}</pre>

<span>Touched</span>
<pre>{{ miFormulario.touched }}</pre>

<span>Untouched</span>
<pre>{{ miFormulario.touched }}</pre>

<span>Valor</span>
<pre>{{ miFormulario.value | json }}</pre>

<span>Errors</span>
<pre>{{ miFormulario.controls["nombre"].errors | json }}</pre>
